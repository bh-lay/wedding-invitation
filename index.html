<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>陈仁磊-田晓杰</title>
	<link rel="stylesheet" href="/less/index.less">
</head>
<body>
<div class="pages">
	<div class="page slideHidden" id="page1">
		<script type="text/template">
			<link rel="import" href="template/page-1.html?__inline">
		</script>
	</div>
	<div class="page" id="page2">
		<script type="text/template">
			<link rel="import" href="template/page-2.html?__inline">
		</script>
	</div>
	<div class="page" id="page3">
		<script type="text/template">
			<link rel="import" href="template/page-3.html?__inline">
		</script>
	</div>
	<div class="page slideHidden" id="page4">
		<script type="text/template">
			<link rel="import" href="template/page-4.html?__inline">
		</script>
	</div>
	<div class="page" id="page5">
		<script type="text/template">
			<link rel="import" href="template/page-5.html?__inline">
		</script>
	</div>
	<div class="page" id="page6">
		<script type="text/template">
			<link rel="import" href="template/page-6.html?__inline">
		</script>
	</div>
	<div class="page" id="page7">
		<script type="text/template">
			<link rel="import" href="template/page-7.html?__inline">
		</script>
	</div>
	<div class="page" id="page8">
		<script type="text/template">
			<link rel="import" href="template/page-8.html?__inline">
		</script>
	</div>
	<div class="page" id="page9">
		<script type="text/template">
			<link rel="import" href="template/page-9.html?__inline">
		</script>
	</div>
	<div class="page" id="page10">
		<script type="text/template">
			<link rel="import" href="template/page-10.html?__inline">
		</script>
	</div>
	<div class="page" id="page11">
		<script type="text/template">
			<link rel="import" href="template/page-11.html?__inline">
		</script>
	</div>
	<div class="page" id="page12">
		<script type="text/template">
			<link rel="import" href="template/page-12.html?__inline">
		</script>
	</div>
	<div class="page" id="page13">
		<script type="text/template">
			<link rel="import" href="template/page-13.html?__inline">
		</script>
	</div>
	<div class="page" id="page14">
		<script type="text/template">
			<link rel="import" href="template/page-14.html?__inline">
		</script>
	</div>
	<div class="page" id="page15">
		<script type="text/template">
			<link rel="import" href="template/page-15.html?__inline">
		</script>
	</div>
	<div class="page" id="page16">
		<script type="text/template">
			<link rel="import" href="template/page-16.html?__inline">
		</script>
	</div>
	<div class="page" id="page17">
		<script type="text/template">
			<link rel="import" href="template/page-17.html?__inline">
		</script>
	</div>
	<div class="page" id="page18">
		<script type="text/template">
			<link rel="import" href="template/page-18.html?__inline">
		</script>
	</div>
	<div class="page" id="page19">
		<script type="text/template">
			<link rel="import" href="template/page-19.html?__inline">
		</script>
	</div>
	<div class="page" id="page20">
		<script type="text/template">
			<link rel="import" href="template/page-20.html?__inline">
		</script>
	</div>
	<div class="page" id="page21">
		<script type="text/template">
			<link rel="import" href="template/page-21.html?__inline">
		</script>
	</div>
</div>
	<div class="music play"><span></span></div>
	<script type="text/javascript" src="/js/toucher.js"></script>
	<script type="text/javascript" src="/js/swiper.js"></script>
    <script type="text/javascript" src="/js/music.js"></script>
    <script type="text/javascript">
		var defaultIndex = location.hash ? location.hash.replace(/\#/,''): 0,
			swiper = new Swiper(document.querySelector('.pages'),{
				slideClass: 'page',
				defaultSlideIndex: defaultIndex
			});

		var isLoadedList = [];
		function replaceTplToSlide( index ){
			if( isLoadedList[index] ){
				console.log('无需加载',index)
				return
			}
			isLoadedList[index] = true;
			var node_slide = swiper.slideList[ index ],
				node_tpl = node_slide.getElementsByTagName('script')[0];
			if( node_tpl ){
				node_slide.innerHTML = node_tpl.innerHTML;
			}
		}
		// 加载页面（一次前中后三页）
		function lazyLoad( index ){
			var length = swiper.slideList.length;
			// 加载当前页
			replaceTplToSlide( index );
			// 向前加载一页
			replaceTplToSlide( index==0 ? length - 1 : index - 1 );

			// 向后加载一页
			replaceTplToSlide( index== length - 1 ? 0 : index + 1 );
		}
		// 加载默认页面
		lazyLoad( defaultIndex );
		swiper.on('slideChange',function( index ){
			lazyLoad( index );
		});

		// 默认播放音乐
		// backgroundMusic();
    </script>
</body>
</html>
